/** 
 * jibo-tools - API for jibo-atom and jibo-cli
 * @version v2.4.5
 * Copyright (c) 2016, Jibo, Inc. All rights reserved.
 * All use of the Jibo SDK is subject to the Jibo SDK End User License Agreement (EULA) 
 * distributed herewith.  If you did not receive a copy of the EULA, you may view a
 * copy at https://developers.jibo.com/license.
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.jiboTools=e()}}(function(){return function e(t,n,o){function r(u,l){if(!n[u]){if(!t[u]){var s="function"==typeof require&&require;if(!l&&s)return s(u,!0);if(i)return i(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var a=n[u]={exports:{}};t[u][0].call(a.exports,function(e){var n=t[u][1][e];return r(n?n:e)},a,a.exports,e,t,n,o)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(){let e="electron-prebuilt-reentrant",t=a["default"].substr(a["default"].indexOf(e)+e.length),n=u["default"].dirname(s["default"].sync("electron-prebuilt-reentrant"));return n+t}Object.defineProperty(n,"__esModule",{value:!0});var i=e("path"),u=o(i),l=e("resolve"),s=o(l),d=e("electron-prebuilt-reentrant"),a=o(d);n["default"]=r},{"electron-prebuilt-reentrant":void 0,path:void 0,resolve:void 0}],2:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t){let n=(0,l["default"])(__dirname);return i["default"].join(n,e||"",t||"")};var r=e("path"),i=o(r),u=e("find-root"),l=o(u)},{"find-root":void 0,path:void 0}],3:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("child_process"),i=e("../get-electron-path"),u=o(i),l=e("path"),s=o(l),d=e("events"),a=e("lodash"),f=o(a),c=e("../robots/sync"),p=e("jibo-sync"),v=e("../robots/run"),h=o(v),g=e("../get-tools-path"),b=o(g);class m extends d.EventEmitter{kill(){(0,p.stop)();this.emit("exit")}}class _ extends d.EventEmitter{constructor(e){super();this.host=e}kill(){e("../robots/stop")({ip:this.host},function(){console.log("skill stopped")});this.emit("exit")}}class y extends d.EventEmitter{constructor(){super();this.child=undefined;this.onChildExitBinded=this.onChildExit.bind(this)}onChildExit(){this.child.removeAllListeners();this.child=undefined;this.emit("exit")}playOnRobot(e,t,n){var o=this;this.child=new m;this.child.on("exit",this.onChildExit.bind(this));(0,c.start)({ip:e},t,function(t){console.log("Skill synced");o.child=undefined;if(t){console.log("UPLOAD ABORTED",t);o.emit("upload-error")}else{o.child=new _(e);o.child.on("exit",o.onChildExit.bind(o));(0,h.default)({ip:e},n,function(e){if(e){console.error("launch error "+e);o.child=undefined;o.emit("play-error")}else{o.emit("playing")}})}})}play(e,t){let n=arguments.length<=2||arguments[2]===undefined?"0123456789abcdefg":arguments[2];console.log("indexPath",e);console.log("remoteRegistry",t);if(!this.child){let o=(0,b.default)("simulator");let i=[s.default.resolve(o,"app.js"),"--path",e,"--token",n];if(t&&t.length>0){i.push("--remote",t)}let l={ATOM_SHELL_INTERNAL_RUN_AS_NODE:"0"};if(process.env.hasOwnProperty("NODE_PATH_SIM")){if(process.env.hasOwnProperty("NODE_PATH")){l.NODE_PATH=process.env.NODE_PATH+":"+process.env.NODE_PATH_SIM}else{l.NODE_PATH=process.env.NODE_PATH_SIM}}this.child=(0,r.spawn)((0,u.default)(),i,{cwd:o,env:f.default.assign({},process.env,l),stdio:"inherit"});this.emit("start");this.child.on("error",function(e){console.log(e)});this.child.on("exit",this.onChildExit.bind(this))}}stop(){if(this.child){console.log("STOP");this.child.on("error",function(e){console.log(e)});this.child.kill()}}}n["default"]=new y},{"../get-electron-path":1,"../get-tools-path":2,"../robots/run":16,"../robots/stop":17,"../robots/sync":18,child_process:void 0,events:void 0,"jibo-sync":void 0,lodash:void 0,path:void 0}],4:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n;return n=/__(?:(package-name)|([pP]ackageName)|(package_name))__/g,e.replace(n,t)}function i(e,t){var n;return n=/__(?:(display-name))__/g,e.replace(n,t)}function u(e){return e=e.replace(/-+|_+/g," "),e=e.replace(/\s+/g," ").trim(),e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function l(e,t){var n;return n=/__(?:(skill-page-title))__/g,e.replace(n,u(t))}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t,n,o,u){var s,a,c,v,g,m,_,y,w;let O=(0,b["default"])("templates",e);try{d["default"].statSync(O)}catch(S){u(`Template type ${e} does not exist`)}for(null===n&&(n=f["default"].basename(t)),d["default"].makeTreeSync(t),g=p["default"].readdirSyncRecursive(O),_=[],c=0,v=g.length;v>c;c++)s=g[c],w=f["default"].resolve(O,s),m=w.replace(O,""),m=m.replace(/^\//,""),m=m.replace(/\.template$/,""),y=f["default"].join(t,m),d["default"].existsSync(y)||(d["default"].isDirectorySync(w)?_.push(d["default"].makeTreeSync(y)):d["default"].isFileSync(w)?(d["default"].makeTreeSync(f["default"].dirname(y)),a=d["default"].readFileSync(w),"package.json"===f["default"].basename(w)?(a=r(a.toString(),n),a=i(a.toString(),o)):"index.html"===f["default"].basename(w)&&(a=l(a.toString(),n)),_.push(d["default"].writeFileSync(y,a))):_.push(void 0));"win32"===process.platform?(alert("You must manually run `npm install` in the command prompt from this skill's directory"),u(null)):h["default"].load(function(){h["default"].commands.install(t,[],function(e){u(e?"Error during npm install: "+e:null)})})};var s=e("fs-plus"),d=o(s),a=e("path"),f=o(a),c=e("wrench"),p=o(c),v=e("npm"),h=o(v),g=e("../get-tools-path"),b=o(g)},{"../get-tools-path":2,"fs-plus":void 0,npm:void 0,path:void 0,wrench:void 0}],5:[function(e,t,n){"use strict";function o(e,t){(0,r.getBuildVersion)(e.ip,function(e,n){t(e,n)})}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./dev-shell");n["default"]=o},{"./dev-shell":8}],6:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("fs"),i=o(r),u=e("path"),l=o(u),s=e("events"),d=e("ensureDir"),a=o(d),f=e("osenv"),c=o(f);let p=l["default"].resolve(c["default"].home(),".jibo/cli.json");class v extends s.EventEmitter{constructor(){super();this.settings={}}load(e){var t=this;i.default.readFile(p,function(n,o){if(n){t.settings={};e(null);return}try{let r=JSON.parse(o);t.settings=r}catch(i){console.log("parse error");console.log(i);e(i)}e(null)})}save(e){var t=this;(0,a.default)(l.default.dirname(p),null,function(){i.default.writeFile(p,JSON.stringify(t.settings,null,"  "),function(t){e(t)})})}get(){if(arguments.length===0){return this.settings}let e=this.settings;for(let t=0;t<arguments.length;t++){if(typeof e[arguments[t]]!=="undefined"){e=e[arguments[t]]}else{return undefined}}return e}set(e){if(arguments.length===0){throw new Error("No value was provided to Config.set()")}else if(arguments.length===1){this.settings=e}let t=this.settings;for(let n=0;n<arguments.length-2;n++){console.log("path "+arguments[n]);if(typeof t[arguments[n]]==="undefined"||Array.isArray(t[arguments[n]])){t[arguments[n]]={}}t=t[arguments[n]]}t[arguments[arguments.length-2]]=arguments[arguments.length-1]}}n["default"]=v},{ensureDir:void 0,events:void 0,fs:void 0,osenv:void 0,path:void 0}],7:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n,o){(0,l["default"])(e,t,function(t,o){if(t)return void n(t);let r="http://"+e.ip+":9191/json";(0,d["default"])(r,function(t,r,u){if(t||200!=r.statusCode)return void n("Couldn't fetch debugger apps list: "+t);try{let l=JSON.parse(u);(0,f["default"])("debugger-app",function(t){if(t)return void n(t);let r=h["default"].resolve((0,b["default"])(__dirname),"bin/debugger-app.js");r=h["default"].normalize(r);let u=`http://${e.ip}:9191${l[0].devtoolsFrontendUrl}`,s=h["default"].normalize((0,p["default"])()),d=`${s} ${r} ${u} "&"`,a=void 0;a="win32"===process.platform?(0,i.spawn)("cmd",["/C",`${d}`],{detached:!0}):(0,i.spawn)("sh",["-c",`${d}`]),a&&a.unref(),n(null,o)})}catch(s){return void n(s)}})},o)}Object.defineProperty(n,"__esModule",{value:!0});var i=e("child_process"),u=e("./run"),l=o(u),s=e("request"),d=o(s),a=e("./kill-process"),f=o(a),c=e("../get-electron-path"),p=o(c),v=e("path"),h=o(v),g=e("find-root"),b=o(g);n["default"]=r},{"../get-electron-path":1,"./kill-process":11,"./run":16,child_process:void 0,"find-root":void 0,path:void 0,request:void 0}],8:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n,o,r){let i={dirName:n};h(e,w,i,function(n,i){if(n)r(n,i);else{let u=e+":"+y,l=!1;(0,m.uploadToServer)(u,t,l,o,function(e,t){r(e,t)})}})}function i(e,t){let n=e+":"+y;(0,m.closeServer)(n,function(e,n){t(e,n)})}function u(e,t,n){let o={dirName:t};h(e,O,o,function(e,t){n(e,t)})}function l(e,t){h(e,S,void 0,function(e,n){t(e,n)})}function s(e,t){h(e,P,void 0,function(e,n){t(e,n)})}function d(e,t){h(e,N,void 0,function(e,n){t(e,n)})}function a(e,t,n){if(!t)return void n("No volume specified. Please specify a volume in the range [0.0-1.0].",null);let o=parseFloat(t);if(Number.isNaN(o))return void n('Volume "'+t+'" is not a number.',null);if(0>o||o>1)return void n("Volume must be in the range [0.0-1.0]. Was "+o+".",null);let r={volume:o};h(e,x,r,function(e,t){n(e,t)})}function f(e,t){h(e,k,void 0,function(e,n){t(e,n)})}function c(e,t){h(e,E,void 0,function(e,n){t(e,n)})}function p(e,t){h(e,M,void 0,function(e,n){t(e,n)})}function v(e,t){h(e,j,void 0,function(e,n){t(e,n)})}function h(e,t,n,o){let r=n?n:{};try{r=JSON.stringify(r)}catch(i){return void o("Attempting to send invalid data to dev shell. Request is not valid JSON",null)}let u={hostname:e,port:_,path:t,method:"POST",headers:{"Content-Type":"application/json"}},l=b["default"].request(u,function(e){var t="";e.on("data",function(e){t+=e}),e.on("end",function(){let e=void 0;try{e=JSON.parse(t)}catch(n){return void o("Invalid request to dev shell. Request body is not valid JSON",null)}"ERROR"===e.Status?o(e.Message,null):o(null,e.Message)})});l.on("error",function(){o("Dev shell is not available on "+e,null)}),l.write(r),l.end()}Object.defineProperty(n,"__esModule",{value:!0}),n.syncSkill=r,n.stopSync=i,n.runSkill=u,n.stopSkill=l,n.getBuildVersion=s,n.getVolume=d,n.setVolume=a,n.getDiskSpace=f,n.rebootRobot=c,n.powerOffRobot=p,n.indexRobot=v;var g=e("http"),b=o(g),m=e("jibo-sync");const _=8686,y=8989,w="/sync-skill",O="/run",S="/stop",k="/diskspace",E="/reboot",M="/poweroff",P="/version",j="/index",x="/setvolume",N="/getvolume"},{http:void 0,"jibo-sync":void 0}],9:[function(e,t,n){"use strict";function o(e,t){(0,r.getDiskSpace)(e.ip,function(e,n){t(e,n)})}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./dev-shell");n["default"]=o},{"./dev-shell":8}],10:[function(e,t,n){"use strict";function o(e,t){(0,r.indexRobot)(e.ip,function(e,n){t(e,n)})}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./dev-shell");n["default"]=o},{"./dev-shell":8}],11:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){"win32"===process.platform?(0,i.exec)(`wmic path win32_process Where "CommandLine Like '%${e}%'" delete`,function(e){return e?void t(e):void t()}):(0,i.exec)(`ps -e`,function(n,o){if(n)return void t(n);let r=l["default"].filter(o.split("\n"),function(t){return-1!==t.search(e)});r=l["default"].map(r,function(e){return/\d{1,}/.exec(e)[0]});let u=`kill ${r.join(" ")} || :`;(0,i.exec)(u,function(e){return e?void t(e):void t()})})}Object.defineProperty(n,"__esModule",{value:!0});var i=e("child_process"),u=e("lodash"),l=o(u);n["default"]=r},{child_process:void 0,lodash:void 0}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("child_process");let r={isRobotReachable(e,t){let n=!1,r="-t 10";"win32"===process.platform&&(r="-4");let i=(0,o.spawn)("ping",[r,e.ip],["pipe"]),u="";i.on("close",function(){n||(i.kill("SIGKILL"),t(null,!1),n=!0)}),i.on("exit",function(){n||(i.kill("SIGKILL"),t(null,!1),n=!0)}),i.stderr.on("data",function(e){return u+=e.toString(),-1!==u.search("No route to host")||-1!==u.search("Host is down")?void(n||(i.kill("SIGKILL"),t(null,!1),n=!0)):void 0});let l="";i.stdout.on("data",function(e){l+=e.toString();let o="bytes from";return"win32"===process.platform&&(o="bytes="),-1!==l.search(o)?void(n||(i.kill("SIGKILL"),t(null,!0),n=!0)):void 0})}};n["default"]=r},{child_process:void 0}],13:[function(e,t,n){"use strict";function o(e,t){(0,r.powerOffRobot)(e.ip,function(e,n){t(e,n)})}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./dev-shell");n["default"]=o},{"./dev-shell":8}],14:[function(e,t,n){"use strict";function o(e,t){(0,r.rebootRobot)(e.ip,function(e,n){t(e,n)})}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./dev-shell");n["default"]=o},{"./dev-shell":8}],15:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){let t=new l["default"];t.load(function(n){return n?void e(n):void e(null,t)})}function i(e){return!!e}Object.defineProperty(n,"__esModule",{value:!0});var u=e("./config"),l=o(u),s=e("lodash"),d=o(s);let a={list:function(e){r(function(t,n){if(t)return void e(t);let o=n.get("robots");return Array.isArray(o)?void e(null,o):void e(null,[])})},add(e,t,n){r(function(o,r){if(o)return void n(o);if(!e||0===e.length)return void n(new Error("Robot's name must be at least one character long"));if(i(t)===!1)return void n(new Error(`IP address is not a valid (${t})`));let u=r.get("robots");return("undefined"==typeof u||Array.isArray(u)===!1)&&(u=[]),-1!==d["default"].findIndex(u,function(t){return t.name===e})?void n(new Error(`A robot with the name ${e} already exists. Delete it first if you want to update it's information `)):(u.push({name:e,ip:t}),u.sort(function(e,t){return e>t}),r.set("robots",u),r.set("defaultRobot",e),void r.save(function(e){n(e)}))})},remove(e,t){console.log(""),r(function(n,o){if(n)return void t(n);if(!e||0===e.length)return void t(new Error("Robot's name must be at least one character long"));let r=o.get("robots");if("undefined"==typeof r||Array.isArray(r)===!1)return void t(new Error("There are no robots to delete"));let i=d["default"].findIndex(r,function(t){return t.name===e});return-1===i?void t(new Error(`No robot with the name ${e} exists.`)):(d["default"].pullAt(r,i),o.set("robots",r),o.get("defaultRobot")===e&&o.set("defaultRobot",void 0),void o.save(function(e){t(e)}))})},setDefault(e,t){r(function(n,o){if(n)return void t(n);if(!e||0===e.length)return void t(new Error("Robot's name must be at least one character long"));let r=o.get("robots");return Array.isArray(r)===!1||-1===d["default"].findIndex(r,function(t){return t.name===e})?void t(new Error(`${e} doesn't exist in the list of robots. Run to 'jibo robot-list' to see the list of robots`)):(o.set("defaultRobot",e),void o.save(function(e){t(e)}))})},getDefault(e){r(function(t,n){if(t)return void e(t);let o=n.get("defaultRobot");return"undefined"==typeof o?void e(null,null):void e(null,o)})},getInfo(e,t){return 0===e.length?void t(new Error("Robot's name must be at least one character long")):void this.list(function(n,o){if(n)return void t(n);let r=d["default"].findIndex(o,function(t){return t.name===e});return-1===r?void t(new Error(`No robot by the name ${e} exists in the robot list`)):void t(null,o[r])})}};n["default"]=a},{"./config":6,lodash:void 0}],16:[function(e,t,n){"use strict";function o(e,t,n){(0,r.runSkill)(e.ip,t,function(e,t){n(e,t)})}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./dev-shell");n["default"]=o},{"./dev-shell":8}],17:[function(e,t,n){"use strict";function o(e,t){(0,r.stopSkill)(e.ip,function(e,n){t(e,n)})}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./dev-shell");n["default"]=o},{"./dev-shell":8}],18:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./validate-skill-path"),i=o(r),u=e("./dev-shell");class l{static start(e,t,n){(0,i.default)(t,function(t,o,r){if(t){n(t,null);return}let i=true;(0,u.syncSkill)(e.ip,o,r,i,function(e,t){n(e,t)})})}static stop(e,t){(0,u.stopSync)(e.ip,function(e,n){t(e,n)})}}n["default"]=l},{"./dev-shell":8,"./validate-skill-path":19}],19:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){return"string"==typeof e?l["default"].resolve(process.cwd(),e):process.cwd()}function i(e,t){e=r(e),d["default"].lstat(e,function(n,o){return n?-2===n.errno?void t(new Error(`No folder exists at ${e}`)):void t(n):o.isDirectory()===!1?void t(new Error(`${e} is a file not a directory`)):void d["default"].readFile(l["default"].resolve(e,"package.json"),"utf8",function(n,o){if(n)return-2===n.errno?void t(new Error(`No 'package.json' exists at ${e}/package.json`)):void t(n);let r;try{r=JSON.parse(o)}catch(i){return void t(new Error(`Error parsing skill's 'package.json' at ${e}/package.json`))}if("string"!=typeof r.name&&0!==r.name.length)return void t(new Error(`Skill hasn't properly set the "name" field in ${e}/package.json`));let u=r.name;t(null,e,u)})})}Object.defineProperty(n,"__esModule",{value:!0});var u=e("path"),l=o(u),s=e("fs"),d=o(s);n["default"]=i},{fs:void 0,path:void 0}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./dev-shell");let r={get(e,t){(0,o.getVolume)(e.ip,function(e,n){t(e,n)})},set(e,t,n){(0,o.setVolume)(e.ip,t,function(e,t){n(e,t)})}};n["default"]=r},{"./dev-shell":8}],21:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./package-generator/package-generator"),i=o(r),u=e("./launcher/launcher"),l=o(u),s=e("./robots/sync"),d=o(s),a=e("./robots/run"),f=o(a),c=e("./robots/debug"),p=o(c),v=e("./robots/stop"),h=o(v),g=e("./robots/robots"),b=o(g),m=e("./robots/networks"),_=o(m),y=e("./robots/disk-space"),w=o(y),O=e("./robots/build-version"),S=o(O),k=e("./robots/volume"),E=o(k),M=e("./robots/index"),P=o(M),j=e("./robots/reboot"),x=o(j),N=e("./robots/poweroff"),A=o(N),R=e("./robots/validate-skill-path"),T=o(R),D=e("./get-electron-path"),I=o(D),L=e("./get-tools-path"),C=o(L);n["default"]={packageGenerator:i["default"],launcher:l["default"],sync:d["default"],run:f["default"],debug:p["default"],stop:h["default"],robots:b["default"],networks:_["default"],diskSpace:w["default"],buildVersion:S["default"],volume:E["default"],index:P["default"],reboot:x["default"],powerOff:A["default"],validateSkillPath:T["default"],getElectronPath:I["default"],getToolsPath:C["default"]}},{"./get-electron-path":1,"./get-tools-path":2,"./launcher/launcher":3,"./package-generator/package-generator":4,"./robots/build-version":5,"./robots/debug":7,"./robots/disk-space":9,"./robots/index":10,"./robots/networks":12,"./robots/poweroff":13,"./robots/reboot":14,"./robots/robots":15,"./robots/run":16,"./robots/stop":17,"./robots/sync":18,"./robots/validate-skill-path":19,"./robots/volume":20}]},{},[21])(21)});